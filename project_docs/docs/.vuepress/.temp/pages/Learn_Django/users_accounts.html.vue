<template><div><h1 id="ğŸ‘¥-users-accounts" tabindex="-1"><a class="header-anchor" href="#ğŸ‘¥-users-accounts"><span>ğŸ‘¥ Users Accounts</span></a></h1>
<h2 id="ğŸ“¦-models-Ø§Ù„Ù†Ù…Ø§Ø°Ø¬" tabindex="-1"><a class="header-anchor" href="#ğŸ“¦-models-Ø§Ù„Ù†Ù…Ø§Ø°Ø¬"><span>ğŸ“¦ Models (Ø§Ù„Ù†Ù…Ø§Ø°Ø¬)</span></a></h2>
<div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre v-pre><code><span class="line"><span class="token comment"># ğŸ“„ [users_accounts/models.py] ØµÙØ­Ø©</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</span>
<span class="line"></span>
<span class="line"><span class="token comment"># uuid: ÙŠÙØ³ØªØ®Ø¯Ù… Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø±Ù‘ÙØ§Øª ÙØ±ÙŠØ¯Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹</span></span>
<span class="line"><span class="token comment"># ğŸ”‘ uuid: (Unique IDs) ÙŠÙØ³ØªØ®Ø¯Ù… Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø±Ù‘ÙØ§Øª ÙØ±ÙŠØ¯Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹</span></span>
<span class="line"><span class="token keyword">import</span> uuid</span>
<span class="line"></span>
<span class="line"><span class="token comment"># âš™ï¸ settings: Django Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf <span class="token keyword">import</span> settings</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ‘¤ AbstractBaseUser, PermissionsMixin: Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù†Ù…ÙˆØ°Ø¬ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø®ØµØµ (Custom User Model)</span></span>
<span class="line"><span class="token comment"># ğŸ‘¨â€ğŸ’» UserManager: (superusers) Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ù…Ø´Ø±ÙÙŠÙ†</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> AbstractBaseUser<span class="token punctuation">,</span> PermissionsMixin<span class="token punctuation">,</span> UserManager</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ—ï¸ Django Ø¯Ø§Ø®Ù„ (Models) Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ•’ timezone: (Dates &amp; Times) Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªÙˆÙ‚ÙŠØªØ§Øª</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone</span>
<span class="line"><span class="token comment"># â³ timesince: Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† ÙˆÙ‚ØªÙŠÙ† Ø¨ØµÙŠØºØ© Ù…ÙÙ‡ÙˆÙ…Ø© (Ù…Ø«Ù„Ø§Ù‹: "Ù…Ù†Ø° Ø³Ø§Ø¹ØªÙŠÙ†")</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>timesince <span class="token keyword">import</span> timesince</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ‘¥ Dedicated manager to create and manage users</span></span>
<span class="line"><span class="token comment"># ğŸ‘¥ Ù…Ø¯ÙŠØ± Ù…Ø®ØµØµ Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">CustomUserManager</span><span class="token punctuation">(</span>UserManager<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">_create_user</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token operator">**</span>extra_fields<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># âœ‰ï¸ Verify email entry</span></span>
<span class="line">        <span class="token comment"># âœ‰ï¸ ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> email<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"You have not provided a valid e-mail address"</span><span class="token punctuation">)</span></span>
<span class="line">        email <span class="token operator">=</span> self<span class="token punctuation">.</span>normalize_email<span class="token punctuation">(</span>email<span class="token punctuation">)</span></span>
<span class="line">        user <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">(</span>email<span class="token operator">=</span>email<span class="token punctuation">,</span> name<span class="token operator">=</span>name<span class="token punctuation">,</span> <span class="token operator">**</span>extra_fields<span class="token punctuation">)</span></span>
<span class="line">        user<span class="token punctuation">.</span>set_password<span class="token punctuation">(</span>password<span class="token punctuation">)</span></span>
<span class="line">        user<span class="token punctuation">.</span>save<span class="token punctuation">(</span>using<span class="token operator">=</span>self<span class="token punctuation">.</span>_db<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> user</span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ‘¤ Create a regular user</span></span>
<span class="line">    <span class="token comment"># ğŸ‘¤ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">create_user</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> email<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>extra_fields<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        extra_fields<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span><span class="token string">"is_staff"</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">        extra_fields<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span><span class="token string">"is_superuser"</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_create_user<span class="token punctuation">(</span>name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token operator">**</span>extra_fields<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ›¡ï¸ Create an administrative user (super user)</span></span>
<span class="line">    <span class="token comment"># ğŸ›¡ï¸ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø¯Ø§Ø±ÙŠ (Ø³ÙˆØ¨Ø± ÙŠÙˆØ²Ø±)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">create_superuser</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> email<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>extra_fields<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        extra_fields<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span><span class="token string">"is_staff"</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">        extra_fields<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span><span class="token string">"is_superuser"</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_create_user<span class="token punctuation">(</span>name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token operator">**</span>extra_fields<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ§‘ Custom User Form ğŸ§‘ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø®ØµØµ</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>AbstractBaseUser<span class="token punctuation">,</span> PermissionsMixin<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ___________________</span></span>
<span class="line">    <span class="token comment"># Ø­Ù‚Ù„ ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></span>
<span class="line">    <span class="token comment"># ___________________</span></span>
<span class="line">    <span class="token comment"># ğŸ”‘ Define the primary field to be UUID  ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„ÙŠÙƒÙˆÙ†</span></span>
<span class="line">    <span class="token builtin">id</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>UUIDField<span class="token punctuation">(</span>primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> default<span class="token operator">=</span>uuid<span class="token punctuation">.</span>uuid4<span class="token punctuation">,</span> editable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># âš™ï¸ User Status  Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    is_active <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    is_superuser <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">    is_staff <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ“‹ Custom Admin Link Ø±Ø¨Ø· Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø®ØµØµ</span></span>
<span class="line">    objects <span class="token operator">=</span> CustomUserManager<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ‘¥ Friends and Characteristics of Friendships Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙˆØ®ØµØ§Ø¦Øµ Ø§Ù„ØµØ¯Ø§Ù‚Ø§Øª</span></span>
<span class="line">    friends <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span><span class="token string">"self"</span><span class="token punctuation">)</span></span>
<span class="line">    friends_count <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    people_you_may_know <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span><span class="token string">"self"</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ“… Join Date &amp; Last Login ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… ÙˆØ¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</span></span>
<span class="line">    date_joined <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>default<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">)</span></span>
<span class="line">    last_login <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ___________________</span></span>
<span class="line">    <span class="token comment"># Ø­Ù‚Ù„ ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ø§Ù…</span></span>
<span class="line">    <span class="token comment"># ___________________</span></span>
<span class="line">    <span class="token comment"># ğŸ“› User Data Properties Ø®ØµØ§Ø¦Øµ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span></span>
<span class="line">    surname <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span></span>
<span class="line">    email <span class="token operator">=</span> models<span class="token punctuation">.</span>EmailField<span class="token punctuation">(</span>unique<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    date_of_birth <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>default<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">)</span></span>
<span class="line">    gender <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ–¼ï¸ Profile Picture ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©</span></span>
<span class="line">    avatar <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">"avatars"</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ–¼ï¸ Cover Photo ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù</span></span>
<span class="line">    cover <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">"covers"</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># Ù…Ù‡Ø§Ø±Ø§Øª</span></span>
<span class="line">    skills <span class="token operator">=</span> models<span class="token punctuation">.</span>JSONField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ“‹ Tasks and Their Number Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ¹Ø¯Ø¯Ù‡Ø§</span></span>
<span class="line">    task_count <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ“… User Is Online  Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„</span></span>
<span class="line">    is_online <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ”’ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙƒÙ…Ø­Ø¯Ø¯ Ø±Ø¦ÙŠØ³ÙŠ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span></span>
<span class="line">    <span class="token comment"># ÙŠØ­Ø¯Ø¯ Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ø°ÙŠ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ Ù‡Ùˆ email.</span></span>
<span class="line">    USERNAME_FIELD <span class="token operator">=</span> <span class="token string">"email"</span></span>
<span class="line">    <span class="token comment"># ÙŠØ­Ø¯Ø¯ Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ø°ÙŠ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙƒØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…. ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ Ù‡Ùˆ email.</span></span>
<span class="line">    EMAIL_FIELD <span class="token operator">=</span> <span class="token string">"email"</span></span>
<span class="line">    <span class="token comment"># ğŸ“ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ù‚ÙˆÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ Ø¹Ø¨Ø± Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©.</span></span>
<span class="line">    REQUIRED_FIELDS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ–¼ï¸ Function to get cover image link With default link if none exists</span></span>
<span class="line">    <span class="token comment"># ğŸ–¼ï¸ Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù Ù…Ø¹ Ø±Ø§Ø¨Ø· Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get_avatar</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">if</span> self<span class="token punctuation">.</span>avatar<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> settings<span class="token punctuation">.</span>WEBSITE_URL <span class="token operator">+</span> self<span class="token punctuation">.</span>avatar<span class="token punctuation">.</span>url</span>
<span class="line">        <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token string">"https://picsum.photos/200/200"</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get_cover</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">if</span> self<span class="token punctuation">.</span>cover<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> settings<span class="token punctuation">.</span>WEBSITE_URL <span class="token operator">+</span> self<span class="token punctuation">.</span>cover<span class="token punctuation">.</span>url</span>
<span class="line">        <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token string">"https://picsum.photos/200/200"</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">date_joined_formatted</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> timesince<span class="token punctuation">(</span>self<span class="token punctuation">.</span>date_joined<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">last_login_formatted</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> timesince<span class="token punctuation">(</span>self<span class="token punctuation">.</span>last_login<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ“¬ Friend Request Form Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">FriendshipRequest</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸ“ Friend request cases  Ø­Ø§Ù„Ø§Øª Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">    NOTSEND <span class="token operator">=</span> <span class="token string">"notsend"</span>  <span class="token comment"># ğŸš« Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">    SEND <span class="token operator">=</span> <span class="token string">"send"</span>  <span class="token comment"># âœ‰ï¸ ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">    WAITING <span class="token operator">=</span> <span class="token string">"waiting"</span>  <span class="token comment"># â³ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯</span></span>
<span class="line">    ACCEPTED <span class="token operator">=</span> <span class="token string">"accepted"</span>  <span class="token comment"># âœ… ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„</span></span>
<span class="line">    REJECTED <span class="token operator">=</span> <span class="token string">"rejected"</span>  <span class="token comment"># âŒ ØªÙ… Ø§Ù„Ø±ÙØ¶</span></span>
<span class="line">    CANCEL <span class="token operator">=</span> <span class="token string">"cancel"</span>  <span class="token comment"># ğŸ”„ ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡</span></span>
<span class="line">    UNFRIEND <span class="token operator">=</span> <span class="token string">"unfriend"</span>  <span class="token comment"># ğŸ”„ ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">    BLOCKED <span class="token operator">=</span> <span class="token string">"blocked"</span>  <span class="token comment"># ğŸš« Ø§Ù„Ø­Ø¸Ø±</span></span>
<span class="line">    MUTED <span class="token operator">=</span> <span class="token string">"muted"</span>  <span class="token comment"># ğŸ”• Ø§Ù„ÙƒØªÙ…</span></span>
<span class="line">    FROZEN <span class="token operator">=</span> <span class="token string">"frozen"</span>  <span class="token comment"># ğŸ§Š ØªØ¬Ù…ÙŠØ¯</span></span>
<span class="line">    ARCHIVED <span class="token operator">=</span> <span class="token string">"archived"</span>  <span class="token comment"># ğŸ“¦ Ù…Ø¤Ø±Ø´Ù</span></span>
<span class="line">    FOLLOWING <span class="token operator">=</span> <span class="token string">"following"</span>  <span class="token comment"># ğŸ‘¥ Ù…ØªØ§Ø¨Ø¹Ø©</span></span>
<span class="line">    UNFOLLOWED <span class="token operator">=</span> <span class="token string">"unfollowed"</span>  <span class="token comment"># ğŸš« Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</span></span>
<span class="line">    REPORTED <span class="token operator">=</span> <span class="token string">"reported"</span>  <span class="token comment"># ğŸš¨ ØªÙ… Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù†Ù‡</span></span>
<span class="line">    SPAM <span class="token operator">=</span> <span class="token string">"spam"</span>  <span class="token comment"># ğŸ—‘ï¸ Ø¨Ø±ÙŠØ¯ Ù…Ø²Ø¹Ø¬</span></span>
<span class="line">    DELETED <span class="token operator">=</span> <span class="token string">"deleted"</span>  <span class="token comment"># ğŸ—‘ï¸ Ù…Ø­Ø°ÙˆÙ</span></span>
<span class="line">    FAVORITE <span class="token operator">=</span> <span class="token string">"favorite"</span>  <span class="token comment"># ğŸŒŸ Ù…ÙØ¶Ù„</span></span>
<span class="line">    TEMPORARILY_BLOCKED <span class="token operator">=</span> <span class="token string">"temporarily_blocked"</span>  <span class="token comment"># â³ Ø­Ø¸Ø± Ù…Ø¤Ù‚Øª</span></span>
<span class="line">    VERIFIED <span class="token operator">=</span> <span class="token string">"verified"</span>  <span class="token comment"># âœ”ï¸ ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚</span></span>
<span class="line">    REQUEST_RESENT <span class="token operator">=</span> <span class="token string">"request_resent"</span>  <span class="token comment"># ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">    SUGGESTED <span class="token operator">=</span> <span class="token string">"suggested"</span>  <span class="token comment"># ğŸ’¡ Ù…Ù‚ØªØ±Ø­</span></span>
<span class="line">    IGNORED <span class="token operator">=</span> <span class="token string">"ignored"</span>  <span class="token comment"># ğŸ›‘ ØªÙ… Ø§Ù„ØªØ¬Ø§Ù‡Ù„</span></span>
<span class="line">    INACTIVE <span class="token operator">=</span> <span class="token string">"inactive"</span>  <span class="token comment"># âš ï¸ ØºÙŠØ± Ù†Ø´Ø·</span></span>
<span class="line">    LIMITED <span class="token operator">=</span> <span class="token string">"limited"</span>  <span class="token comment"># ğŸš« Ù…Ø­Ø¯ÙˆØ¯</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“œ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ù…ÙƒÙ†Ø© Ù…Ø¹ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø©</span></span>
<span class="line">    STATUS_CHOICES <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token punctuation">(</span>NOTSEND<span class="token punctuation">,</span> <span class="token string">"NotSent"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸš« Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">        <span class="token punctuation">(</span>SEND<span class="token punctuation">,</span> <span class="token string">"Send"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># âœ‰ï¸ ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">        <span class="token punctuation">(</span>WAITING<span class="token punctuation">,</span> <span class="token string">"Waiting"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># â³ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯</span></span>
<span class="line">        <span class="token punctuation">(</span>ACCEPTED<span class="token punctuation">,</span> <span class="token string">"Accepted"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># âœ… ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„</span></span>
<span class="line">        <span class="token punctuation">(</span>REJECTED<span class="token punctuation">,</span> <span class="token string">"Rejected"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># âŒ ØªÙ… Ø§Ù„Ø±ÙØ¶</span></span>
<span class="line">        <span class="token punctuation">(</span>CANCEL<span class="token punctuation">,</span> <span class="token string">"Cancel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ”„ ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡</span></span>
<span class="line">        <span class="token punctuation">(</span>UNFRIEND<span class="token punctuation">,</span> <span class="token string">"Unfriend"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ”„ ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡</span></span>
<span class="line">        <span class="token punctuation">(</span>BLOCKED<span class="token punctuation">,</span> <span class="token string">"Blocked"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸš« Ø§Ù„Ø­Ø¸Ø±</span></span>
<span class="line">        <span class="token punctuation">(</span>MUTED<span class="token punctuation">,</span> <span class="token string">"Muted"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ”• Ø§Ù„ÙƒØªÙ…</span></span>
<span class="line">        <span class="token punctuation">(</span>FROZEN<span class="token punctuation">,</span> <span class="token string">"Frozen"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ§Š ØªØ¬Ù…ÙŠØ¯</span></span>
<span class="line">        <span class="token punctuation">(</span>ARCHIVED<span class="token punctuation">,</span> <span class="token string">"Archived"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ“¦ Ù…Ø¤Ø±Ø´Ù</span></span>
<span class="line">        <span class="token punctuation">(</span>FOLLOWING<span class="token punctuation">,</span> <span class="token string">"Following"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘¥ Ù…ØªØ§Ø¨Ø¹Ø©</span></span>
<span class="line">        <span class="token punctuation">(</span>UNFOLLOWED<span class="token punctuation">,</span> <span class="token string">"Unfollowed"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸš« Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</span></span>
<span class="line">        <span class="token punctuation">(</span>REPORTED<span class="token punctuation">,</span> <span class="token string">"Reported"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸš¨ ØªÙ… Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù†Ù‡</span></span>
<span class="line">        <span class="token punctuation">(</span>SPAM<span class="token punctuation">,</span> <span class="token string">"Spam"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ—‘ï¸ Ø¨Ø±ÙŠØ¯ Ù…Ø²Ø¹Ø¬</span></span>
<span class="line">        <span class="token punctuation">(</span>DELETED<span class="token punctuation">,</span> <span class="token string">"Deleted"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ—‘ï¸ Ù…Ø­Ø°ÙˆÙ</span></span>
<span class="line">        <span class="token punctuation">(</span>FAVORITE<span class="token punctuation">,</span> <span class="token string">"Favorite"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸŒŸ Ù…ÙØ¶Ù„</span></span>
<span class="line">        <span class="token punctuation">(</span>TEMPORARILY_BLOCKED<span class="token punctuation">,</span> <span class="token string">"TemporarilyBlocked"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># â³ Ø­Ø¸Ø± Ù…Ø¤Ù‚Øª</span></span>
<span class="line">        <span class="token punctuation">(</span>VERIFIED<span class="token punctuation">,</span> <span class="token string">"Verified"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># âœ”ï¸ ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚</span></span>
<span class="line">        <span class="token punctuation">(</span>REQUEST_RESENT<span class="token punctuation">,</span> <span class="token string">"RequestResent"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">        <span class="token punctuation">(</span>SUGGESTED<span class="token punctuation">,</span> <span class="token string">"Suggested"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ’¡ Ù…Ù‚ØªØ±Ø­</span></span>
<span class="line">        <span class="token punctuation">(</span>IGNORED<span class="token punctuation">,</span> <span class="token string">"Ignored"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ›‘ ØªÙ… Ø§Ù„ØªØ¬Ø§Ù‡Ù„</span></span>
<span class="line">        <span class="token punctuation">(</span>INACTIVE<span class="token punctuation">,</span> <span class="token string">"Inactive"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># âš ï¸ ØºÙŠØ± Ù†Ø´Ø·</span></span>
<span class="line">        <span class="token punctuation">(</span>LIMITED<span class="token punctuation">,</span> <span class="token string">"Limited"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸš« Ù…Ø­Ø¯ÙˆØ¯</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ”‘ Friend Request UUID Essential Field Ø­Ù‚Ù„ Ø£Ø³Ø§Ø³ÙŠ UUID Ù„Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">    <span class="token builtin">id</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>UUIDField<span class="token punctuation">(</span>primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> default<span class="token operator">=</span>uuid<span class="token punctuation">.</span>uuid4<span class="token punctuation">,</span> editable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ§‘ User receiving the request  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù… Ù„Ù„Ø·Ù„Ø¨</span></span>
<span class="line">    created_for <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span></span>
<span class="line">        User<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"received_friendshiprequests"</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ§‘ The user who sent the request  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„Ø·Ù„Ø¨</span></span>
<span class="line">    created_by <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span></span>
<span class="line">        User<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"created_friendshiprequests"</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ“… Creation date ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</span></span>
<span class="line">    created_at <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ“ Order Status  Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</span></span>
<span class="line">    <span class="token comment"># ğŸš« Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"</span></span>
<span class="line">    status <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span></span>
<span class="line">        max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>STATUS_CHOICES<span class="token punctuation">,</span> default<span class="token operator">=</span>NOTSEND<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></span>
<span class="line">        ordering <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"-created_at"</span><span class="token punctuation">,</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">"%s"</span> <span class="token operator">%</span> self<span class="token punctuation">.</span>status</span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ” Retrieve All Friend Requests by User and Status ğŸ”</span></span>
<span class="line">    <span class="token comment"># ğŸ§‘â€ğŸ¤â€ğŸ§‘ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„Ø­Ø§Ù„Ø©</span></span>
<span class="line">    <span class="token decorator annotation punctuation">@staticmethod</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get_friends_by_status</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token triple-quoted-string string">"""Ø¬Ù„Ø¨ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ù…Ø­Ø¯Ø¯Ø©"""</span></span>
<span class="line">        <span class="token keyword">if</span> status <span class="token operator">==</span> FriendshipRequest<span class="token punctuation">.</span>ACCEPTED<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">                received_friendshiprequests__created_by<span class="token operator">=</span>user<span class="token punctuation">,</span></span>
<span class="line">                received_friendshiprequests__status<span class="token operator">=</span>status<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span> <span class="token operator">|</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">                created_friendshiprequests__created_for<span class="token operator">=</span>user<span class="token punctuation">,</span></span>
<span class="line">                created_friendshiprequests__status<span class="token operator">=</span>status<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">            received_friendshiprequests__created_by<span class="token operator">=</span>user<span class="token punctuation">,</span></span>
<span class="line">            received_friendshiprequests__status<span class="token operator">=</span>status<span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ‘¨â€ğŸ’¼-admin-Ù„ÙˆØ­Ø©-Ø§Ù„Ø§Ù•Ø¯Ø§Ø±Ø©" tabindex="-1"><a class="header-anchor" href="#ğŸ‘¨â€ğŸ’¼-admin-Ù„ÙˆØ­Ø©-Ø§Ù„Ø§Ù•Ø¯Ø§Ø±Ø©"><span>ğŸ‘¨â€ğŸ’¼ Admin (Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©)</span></a></h2>
<div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre v-pre><code><span class="line"><span class="token comment"># ğŸ“„ [users_accounts/admin.py] ØµÙØ­Ø©</span></span>
<span class="line"><span class="token comment"># ğŸ› ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙˆÙŠØ¨</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token punctuation">,</span> FriendshipRequest</span>
<span class="line"></span>
<span class="line"><span class="token comment"># admin.site.register(FriendshipRequest)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ–¥ï¸ ØªØ®ØµÙŠØµ Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></span>
<span class="line"><span class="token decorator annotation punctuation">@admin<span class="token punctuation">.</span>register</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">UserAdmin</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span>ModelAdmin<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸŒŸ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ Ø³ØªØ¸Ù‡Ø± ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></span>
<span class="line">    list_display <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"name"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"surname"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"is_online"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"email"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ” ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø¨Ø­Ø« Ø¹Ø¨Ø± Ø§Ù„Ø­Ù‚ÙˆÙ„</span></span>
<span class="line">    search_fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"surname"</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ—‚ï¸ Ø¥Ø¶Ø§ÙØ© ÙÙ„Ø§ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©</span></span>
<span class="line">    list_filter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"is_online"</span><span class="token punctuation">,</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ”ƒ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù…</span></span>
<span class="line">    ordering <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ø¯Ø§Ø®Ù„ Ø´Ø§Ø´Ø© ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    <span class="token comment"># fields = ("name", "surname", "email", "is_online")</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ–¥ï¸ ØªØ®ØµÙŠØµ Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></span>
<span class="line"><span class="token decorator annotation punctuation">@admin<span class="token punctuation">.</span>register</span><span class="token punctuation">(</span>FriendshipRequest<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">FriendshipRequestAdmin</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span>ModelAdmin<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸŒŸ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ Ø³ØªØ¸Ù‡Ø± ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></span>
<span class="line">    list_display <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"created_for"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"created_by"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"status"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ” ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø¨Ø­Ø« Ø¹Ø¨Ø± Ø§Ù„Ø­Ù‚ÙˆÙ„</span></span>
<span class="line">    search_fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"created_for"</span><span class="token punctuation">,</span> <span class="token string">"created_by"</span><span class="token punctuation">,</span> <span class="token string">"status"</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ—‚ï¸ Ø¥Ø¶Ø§ÙØ© ÙÙ„Ø§ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©</span></span>
<span class="line">    list_filter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ”ƒ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù…</span></span>
<span class="line">    ordering <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ø¯Ø§Ø®Ù„ Ø´Ø§Ø´Ø© ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"created_at"</span><span class="token punctuation">,</span> <span class="token string">"created_for"</span><span class="token punctuation">,</span> <span class="token string">"created_by"</span><span class="token punctuation">,</span> <span class="token string">"status"</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“¨-serializers-Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª" tabindex="-1"><a class="header-anchor" href="#ğŸ“¨-serializers-Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª"><span>ğŸ“¨ Serializers (Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª)</span></a></h2>
<div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre v-pre><code><span class="line"><span class="token comment"># ğŸ“ [users_accounts/serializers.py] ØµÙØ­Ø©</span></span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># ğŸ”„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø± (Serializers)ØŒ ÙˆØ§Ù„ØªÙŠ ØªÙØ³ØªØ®Ø¯Ù… Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ (Models) Ùˆ JSON.</span></span>
<span class="line"><span class="token comment"># ğŸŒŸ Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø± Ù…Ù‡Ù… ÙÙŠ Django Rest Framework Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø§Øª Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª (APIs).</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒŸ 1ï¸âƒ£ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¥Ø·Ø§Ø± Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span></span>
<span class="line"><span class="token comment"># - ÙŠØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„ÙˆØ­Ø¯Ø© `serializers` Ù…Ù† Ù…ÙƒØªØ¨Ø© Django Rest Framework.</span></span>
<span class="line"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒŸ 2ï¸âƒ£ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span></span>
<span class="line"><span class="token comment"># - Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª `User` Ùˆ `FriendshipRequest` Ù…Ù† Ù…Ù„Ù `models.py`.</span></span>
<span class="line"><span class="token comment"># - Ù‡Ø°Ù‡ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ØªÙ…Ø«Ù„ Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø±.</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token punctuation">,</span> FriendshipRequest</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ§‘ 3ï¸âƒ£ **UserSerializer**</span></span>
<span class="line"><span class="token comment"># - Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ù…ÙˆØ°Ø¬ `User` Ø¥Ù„Ù‰ JSON ÙˆØ§Ù„Ø¹ÙƒØ³.</span></span>
<span class="line"><span class="token comment"># - ÙŠØ³ØªØ®Ø¯Ù… Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø£Ùˆ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„Ù‡Ø§.</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">UserSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># âœ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø±</span></span>
<span class="line">        model <span class="token operator">=</span> User</span>
<span class="line">        <span class="token comment"># ğŸ” Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ¶Ù…ÙŠÙ†Ù‡Ø§ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</span></span>
<span class="line">        fields <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token string">"id"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ†” Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">            <span class="token string">"name"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘¤ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„</span></span>
<span class="line">            <span class="token string">"surname"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘¥ Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</span></span>
<span class="line">            <span class="token string">"email"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span></span>
<span class="line">            <span class="token string">"date_of_birth"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‚ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</span></span>
<span class="line">            <span class="token string">"gender"</span><span class="token punctuation">,</span>  <span class="token comment"># âš§ Ø§Ù„Ø¬Ù†Ø³</span></span>
<span class="line">            <span class="token string">"get_avatar"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ–¼ï¸ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span></span>
<span class="line">            <span class="token string">"get_cover"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ–¼ï¸ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù</span></span>
<span class="line">            <span class="token string">"friends_count"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘« Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span></span>
<span class="line">            <span class="token string">"task_count"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ“‹ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‡Ø§Ù…</span></span>
<span class="line">            <span class="token string">"date_joined"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</span></span>
<span class="line">            <span class="token string">"date_joined_formatted"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ—“ï¸ ØªÙ†Ø³ÙŠÙ‚ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</span></span>
<span class="line">            <span class="token string">"last_login"</span><span class="token punctuation">,</span>  <span class="token comment"># â±ï¸ Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</span></span>
<span class="line">            <span class="token string">"last_login_formatted"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ•’ ØªÙ†Ø³ÙŠÙ‚ ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</span></span>
<span class="line">            <span class="token string">"is_online"</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ”µ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ (Ù…ØªØµÙ„ Ø£Ù… Ù„Ø§)</span></span>
<span class="line">            <span class="token string">"skills"</span><span class="token punctuation">,</span>  <span class="token comment">#</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ‘« 4ï¸âƒ£ **FriendshipRequestSerializer**</span></span>
<span class="line"><span class="token comment"># - Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø¥Ù„Ù‰ JSON ÙˆØ§Ù„Ø¹ÙƒØ³.</span></span>
<span class="line"><span class="token comment"># - ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„ ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨.</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">FriendshipRequestSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸ‘¤ Ø§Ø³ØªØ®Ø¯Ø§Ù… `UserSerializer` Ù„Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„ (Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·).</span></span>
<span class="line">    created_by <span class="token operator">=</span> UserSerializer<span class="token punctuation">(</span>read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># âœ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø±</span></span>
<span class="line">        model <span class="token operator">=</span> FriendshipRequest</span>
<span class="line">        <span class="token comment"># ğŸ” Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ¶Ù…ÙŠÙ†Ù‡Ø§ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</span></span>
<span class="line">        fields <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token string">"id"</span><span class="token punctuation">,</span>  <span class="token comment"># Ù…Ø¹Ø±Ù Ø§Ù„Ø·Ù„Ø¨</span></span>
<span class="line">            <span class="token string">"created_by"</span><span class="token punctuation">,</span>  <span class="token comment"># Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„</span></span>
<span class="line">            <span class="token string">"status"</span><span class="token punctuation">,</span>  <span class="token comment"># Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ (Ù…Ù‚Ø¨ÙˆÙ„ØŒ Ù…Ø±ÙÙˆØ¶ØŒ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±)</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“-forms-Ø§Ù„Ù†Ù…Ø§Ø°Ø¬" tabindex="-1"><a class="header-anchor" href="#ğŸ“-forms-Ø§Ù„Ù†Ù…Ø§Ø°Ø¬"><span>ğŸ“ Forms (Ø§Ù„Ù†Ù…Ø§Ø°Ø¬)</span></a></h2>
<div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre v-pre><code><span class="line"><span class="token comment"># ğŸ“„ [users_accounts/forms.py] Ù…Ù„Ù</span></span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># ğŸ”„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†Ù…Ø§Ø°Ø¬ Django Forms Ø§Ù„ØªÙŠ ØªÙØ³ØªØ®Ø¯Ù… Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªÙŠ ÙŠØªÙØ§Ø¹Ù„ Ù…Ø¹Ù‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†.</span></span>
<span class="line"><span class="token comment"># ğŸŒŸ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ØªØ¹Ù…Ù„ ÙƒÙˆØ³ÙŠØ· Ø¨ÙŠÙ† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙ‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒŸ 1ï¸âƒ£ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</span></span>
<span class="line"><span class="token comment"># - ÙŠØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… `UserCreationForm` Ù…Ù† Ù…ÙƒØªØ¨Ø© `django.contrib.auth.forms`.</span></span>
<span class="line"><span class="token comment"># - Ø§Ø³ØªÙŠØ±Ø§Ø¯ `forms` Ù…Ù† Ù…ÙƒØªØ¨Ø© Django Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬.</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>forms <span class="token keyword">import</span> UserCreationForm</span>
<span class="line"><span class="token keyword">from</span> django <span class="token keyword">import</span> forms</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒŸ 2ï¸âƒ£ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span></span>
<span class="line"><span class="token comment"># - ÙŠØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ `User` Ø§Ù„Ù…Ø¹Ø±Ù‘ÙÙ Ù…Ø³Ø¨Ù‚Ù‹Ø§ ÙÙŠ Ù…Ù„Ù `models.py`.</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> User</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ“ 3ï¸âƒ£ **SignupForm**</span></span>
<span class="line"><span class="token comment"># - Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯.</span></span>
<span class="line"><span class="token comment"># - ÙŠØ±Ø« Ù…Ù† `UserCreationForm` Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø®ØµØµØ©.</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">SignupForm</span><span class="token punctuation">(</span>UserCreationForm<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬: ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø· ÙˆØ§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶Ù‡Ø§.</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></span>
<span class="line">        model <span class="token operator">=</span> User  <span class="token comment"># ğŸŒŸ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø· Ù‡Ùˆ `User`.</span></span>
<span class="line">        fields <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token comment"># ğŸ§‘ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„</span></span>
<span class="line">            <span class="token string">"name"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ§‘ Ø§Ù„Ù„Ù‚Ø¨</span></span>
<span class="line">            <span class="token string">"surname"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span></span>
<span class="line">            <span class="token string">"email"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</span></span>
<span class="line">            <span class="token string">"date_of_birth"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># âš§ Ø§Ù„Ø¬Ù†Ø³</span></span>
<span class="line">            <span class="token string">"gender"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span></span>
<span class="line">            <span class="token string">"password1"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ”‘ ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span></span>
<span class="line">            <span class="token string">"password2"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ–‹ï¸ 4ï¸âƒ£ **ProfileForm**</span></span>
<span class="line"><span class="token comment"># - Ù†Ù…ÙˆØ°Ø¬ ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø´Ø®ØµÙŠØ©.</span></span>
<span class="line"><span class="token comment"># - ÙŠØ±Ø« Ù…Ù† `forms.ModelForm` Ù„ØªÙˆÙÙŠØ± ÙˆØ§Ø¬Ù‡Ø© Ø³Ù‡Ù„Ø© Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ProfileForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬: ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø· ÙˆØ§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§.</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></span>
<span class="line">        model <span class="token operator">=</span> User  <span class="token comment"># ğŸŒŸ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø· Ù‡Ùˆ `User`.</span></span>
<span class="line">        fields <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token comment"># ğŸ§‘ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„</span></span>
<span class="line">            <span class="token string">"name"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ§‘ Ø§Ù„Ù„Ù‚Ø¨</span></span>
<span class="line">            <span class="token string">"surname"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span></span>
<span class="line">            <span class="token string">"email"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</span></span>
<span class="line">            <span class="token string">"date_of_birth"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># âš§ Ø§Ù„Ø¬Ù†Ø³</span></span>
<span class="line">            <span class="token string">"gender"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ–¼ï¸ ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span></span>
<span class="line">            <span class="token string">"avatar"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ğŸ–¼ï¸ ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù</span></span>
<span class="line">            <span class="token string">"cover"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">"skills"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">"is_online"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸŒ-api-ÙˆØ§Ø¬Ù‡Ø©-Ø¨Ø±Ù…Ø¬Ø©-Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª" tabindex="-1"><a class="header-anchor" href="#ğŸŒ-api-ÙˆØ§Ø¬Ù‡Ø©-Ø¨Ø±Ù…Ø¬Ø©-Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª"><span>ğŸŒ API (ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª)</span></a></h2>
<div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre v-pre><code><span class="line"><span class="token comment"># ğŸ“„ Ù…Ù„Ù [ messenger/messenger_django/account/api.py ]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒ API for User Signup and Profile Info Retrieval</span></span>
<span class="line"><span class="token comment"># ğŸŒ API Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Django Ø¥Ø³ØªÙŠØ±Ø§Ø¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf <span class="token keyword">import</span> settings</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Ø¥Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>forms <span class="token keyword">import</span> PasswordChangeForm</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Ø¥Ø³ØªÙŠØ±Ø§Ø¯ Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mail <span class="token keyword">import</span> send_mail</span>
<span class="line"></span>
<span class="line"><span class="token comment"># JSON Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ø³ØªØ¬Ø§Ø¨Ø§Øª JsonResponse Ø¥Ø³ØªÙŠØ±Ø§Ø¯</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> JsonResponse</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Ø¥Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù„ØªØ¹Ø±ÙŠÙ ÙˆØ­Ø¯Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©</span></span>
<span class="line"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    api_view<span class="token punctuation">,</span></span>
<span class="line">    authentication_classes<span class="token punctuation">,</span></span>
<span class="line">    permission_classes<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Ø¥Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø®ØµØµØ© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> SignupForm<span class="token punctuation">,</span> ProfileForm</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Ø¥Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token punctuation">,</span> FriendshipRequest</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Ø¥Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>serializers <span class="token keyword">import</span> UserSerializer<span class="token punctuation">,</span> FriendshipRequestSerializer</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ› ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</span></span>
<span class="line"><span class="token keyword">import</span> logging</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸš« Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ø±ÙØ¶</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> PermissionDenied</span>
<span class="line"></span>
<span class="line"><span class="token comment">## ğŸŒ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„</span></span>
<span class="line"><span class="token comment"># ğŸ› ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„ØªØ³Ø¬ÙŠÙ„</span></span>
<span class="line">logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙØ³Ø¬Ù„ Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ø³Ù… Ø§Ù„ÙˆØ­Ø¯Ø©</span></span>
<span class="line">logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>parsers <span class="token keyword">import</span> JSONParser</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Ø¥Ø³ØªÙŠØ±Ø§Ø¯ Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span></span>
<span class="line"><span class="token keyword">from</span> notification<span class="token punctuation">.</span>utils <span class="token keyword">import</span> create_notification</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ“œ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±</span></span>
<span class="line"><span class="token keyword">from</span> notification<span class="token punctuation">.</span>models <span class="token keyword">import</span> Notification</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ“ Signup API Endpoint</span></span>
<span class="line"><span class="token comment"># ğŸ“ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ù„ØªØ³Ø¬ÙŠÙ„</span></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸ“¬ Ø§Ù„Ø³Ù…Ø§Ø­ ÙÙ‚Ø· Ø¨Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† Ù†ÙˆØ¹ POST.</span></span>
<span class="line"><span class="token decorator annotation punctuation">@authentication_classes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸš« Ù„Ø§ ØªØªØ·Ù„Ø¨ Ù…ØµØ§Ø¯Ù‚Ø©</span></span>
<span class="line"><span class="token decorator annotation punctuation">@permission_classes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸš« Ù„Ø§ ØªØªØ·Ù„Ø¨ Ø£Ø°ÙˆÙ†Ø§Øª</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">signup</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">"""</span>
<span class="line">    ÙˆØ¸ÙŠÙØ© Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….</span>
<span class="line">    """</span></span>
<span class="line">    <span class="token comment"># ğŸ—ƒï¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙØ±Ø³Ù„Ø© Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨.</span></span>
<span class="line">    data <span class="token operator">=</span> request<span class="token punctuation">.</span>data</span>
<span class="line">    message <span class="token operator">=</span> <span class="token string">"success"</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ§¾ Initialize signup form with request data</span></span>
<span class="line">    <span class="token comment"># ğŸ§¾ ØªÙ‡ÙŠØ¦Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨</span></span>
<span class="line">    form <span class="token operator">=</span> SignupForm<span class="token punctuation">(</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">"name"</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">"surname"</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"surname"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">"email"</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">"date_of_birth"</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"date_of_birth"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">"gender"</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">"password1"</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"password1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">"password2"</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"password2"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># âœ… Check if form is valid âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</span></span>
<span class="line">    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># ğŸ› ï¸ Save the new user ğŸ› ï¸ Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯</span></span>
<span class="line">        user <span class="token operator">=</span> form<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ğŸ”“ Activate the account ğŸ”“ ØªÙ†Ø´ÙŠØ· Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©</span></span>
<span class="line">        user<span class="token punctuation">.</span>is_active <span class="token operator">=</span> <span class="token boolean">True</span></span>
<span class="line">        user<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ğŸ“¤ Ø¥Ø±Ø¬Ø§Ø¹ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­.</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> message<span class="token punctuation">,</span> <span class="token string">"email_sent"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># âŒ If errors exist, return them âŒ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø£Ø®Ø·Ø§Ø¡</span></span>
<span class="line">        message <span class="token operator">=</span> form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>as_json<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ” Print errors for debugging ğŸ” Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªØµØ­ÙŠØ­</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> message<span class="token punctuation">}</span><span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ‘¤ User Info API Endpoint ğŸ‘¤ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">me</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">"""</span>
<span class="line">    ÙˆØ¸ÙŠÙØ© Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ.</span>
<span class="line">    """</span></span>
<span class="line">    <span class="token comment"># âœ… Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ØµØ§Ø¯Ù‚Ù‹Ø§.</span></span>
<span class="line">    <span class="token keyword">if</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>is_authenticated<span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># ğŸ“œ ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ JSON.</span></span>
<span class="line">        user_serializer <span class="token operator">=</span> UserSerializer<span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span>user_serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># âŒ Ø¥Ø±Ø¬Ø§Ø¹ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ØµØ§Ø¯Ù‚.</span></span>
<span class="line">    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"User not authenticated"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">401</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ“ Profile API Endpoint</span></span>
<span class="line"><span class="token comment"># ğŸ“ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"GET"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸŒ Ø§Ù„Ø³Ù…Ø§Ø­ ÙÙ‚Ø· Ø¨Ø·Ù„Ø¨Ø§Øª GET.</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">profile</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">"""</span>
<span class="line">    ÙˆØ¸ÙŠÙØ© Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø¹Ø±ÙÙ‡ Ø§Ù„ÙØ±ÙŠØ¯ (ID).</span>
<span class="line">    """</span></span>
<span class="line">    user <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># print("Profile User By Id ğŸ‘‰ï¸", user)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“œ ØªØ³Ù„Ø³Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø± Ø§Ù„Ù…Ø®ØµØµ.</span></span>
<span class="line">    user_serializer <span class="token operator">=</span> UserSerializer<span class="token punctuation">(</span>user<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸŸ¢ Ø§ÙØªØ±Ø§Ø¶ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">    can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">True</span></span>
<span class="line">    <span class="token comment"># ğŸ”’ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„ ØµØ¯ÙŠÙ‚Ù‹Ø§.</span></span>
<span class="line">    <span class="token keyword">if</span> request<span class="token punctuation">.</span>user <span class="token keyword">in</span> user<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># ğŸ›‘ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ” Check if a request already exists between the users</span></span>
<span class="line">    <span class="token comment"># ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</span></span>
<span class="line">    check1 <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>created_for<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">        created_by<span class="token operator">=</span>user</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    check2 <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>created_for<span class="token operator">=</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">        created_by<span class="token operator">=</span>request<span class="token punctuation">.</span>user</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ”´ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯.</span></span>
<span class="line">    <span class="token keyword">if</span> check1 <span class="token keyword">or</span> check2<span class="token punctuation">:</span></span>
<span class="line">        can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">False</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“¤ Ø¥Ø±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØµÙ„Ø§Ø­ÙŠØ© Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© ÙƒØ§Ø³ØªØ¬Ø§Ø¨Ø© JSON.</span></span>
<span class="line">    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">"user"</span><span class="token punctuation">:</span> user_serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span>  <span class="token comment"># Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø©.</span></span>
<span class="line">            <span class="token string">"can_send_friendship_request"</span><span class="token punctuation">:</span> can_send_friendship_request<span class="token punctuation">,</span>  <span class="token comment"># ØµÙ„Ø§Ø­ÙŠØ© Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>  <span class="token comment"># âš ï¸ ÙŠØªÙŠØ­ Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ù‡ÙŠÙƒÙ„Ø© ÙƒÙ€ JSON.</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ“ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸŒ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ØªØ³ØªØ¬ÙŠØ¨ ÙÙ‚Ø· Ù„Ø·Ù„Ø¨Ø§Øª POST</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">editprofile</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸ‘¤ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø·Ù„Ø¨</span></span>
<span class="line">    <span class="token comment"># ğŸ‘¤ `request.user` ØªÙ…Ø«Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨</span></span>
<span class="line">    user <span class="token operator">=</span> request<span class="token punctuation">.</span>user</span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“§ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø±Ø³Ù„ Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨</span></span>
<span class="line">    <span class="token comment"># ğŸ“§ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… `request.data.get` Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ù‚Ù„ "email"</span></span>
<span class="line">    email <span class="token operator">=</span> request<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“§ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù…Ù‹Ø§ Ø¨Ø§Ù„ÙØ¹Ù„ Ù…Ù† Ù‚Ø¨Ù„ Ù…Ø³ØªØ®Ø¯Ù… Ø¢Ø®Ø±</span></span>
<span class="line">    <span class="token comment"># ğŸ“§ ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… `exclude(id=user.id)`</span></span>
<span class="line">    <span class="token keyword">if</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>exclude<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>email<span class="token operator">=</span>email<span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># ğŸ”´ Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ÙŠØªÙ… Ø¥Ø±Ø¬Ø§Ø¹ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"email already exists"</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># ğŸ“ ØªÙ‡ÙŠØ¦Ø© Ù†Ù…ÙˆØ°Ø¬ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span></span>
<span class="line">        <span class="token comment"># ğŸ“ ÙŠØªÙ… ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø·Ù„Ø¨ (`request.POST`) ÙˆØ£ÙŠ Ù…Ù„ÙØ§Øª (`request.FILES`)</span></span>
<span class="line">        <span class="token comment"># ğŸ“ `instance=user` ÙŠØ±Ø¨Ø· Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡</span></span>
<span class="line">        form <span class="token operator">=</span> ProfileForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">,</span> instance<span class="token operator">=</span>user<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># âœ… Validate and save profile if valid</span></span>
<span class="line">        <span class="token comment"># âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</span></span>
<span class="line">        <span class="token comment"># âœ… Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø©ØŒ ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span></span>
<span class="line">        <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            form<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ğŸ”„ ØªØ³Ù„Ø³Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø­Ø¯Ø«Ø©</span></span>
<span class="line">        <span class="token comment"># ğŸ”„ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… `UserSerializer` Ù„ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ ØµÙŠØºØ© JSON</span></span>
<span class="line">        serializer <span class="token operator">=</span> UserSerializer<span class="token punctuation">(</span>user<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ğŸ”„ Ø¥Ø±Ø¬Ø§Ø¹ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø­Ø¯Ø«Ø©</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"information updated"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">:</span> serializer<span class="token punctuation">.</span>data<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ› ï¸ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸŒ Ø§Ù„Ø¯Ø§Ù„Ø© ØªÙ‚Ø¨Ù„ ÙÙ‚Ø· Ø·Ù„Ø¨Ø§Øª POST</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">editpassword</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸ”’ ØªÙ‡ÙŠØ¦Ø© Ù†Ù…ÙˆØ°Ø¬ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span></span>
<span class="line">    <span class="token comment"># ğŸ”’ `PasswordChangeForm` Ù‡Ùˆ Ù†Ù…ÙˆØ°Ø¬ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù…Ù† Django Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span></span>
<span class="line">    <span class="token comment"># ğŸ”’ ÙŠØªÙ… ØªÙ…Ø±ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨ (`request.POST`) ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ (`user`)</span></span>
<span class="line">    user <span class="token operator">=</span> request<span class="token punctuation">.</span>user</span>
<span class="line">    form <span class="token operator">=</span> PasswordChangeForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> user<span class="token operator">=</span>user<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># âœ… Validate and save new password if valid</span></span>
<span class="line">    <span class="token comment"># âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</span></span>
<span class="line">    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># ğŸ› ï¸ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø©ØŒ ÙŠØªÙ… Ø­ÙØ¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</span></span>
<span class="line">        form<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ğŸŸ¢ Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù†Ø¬Ø§Ø­ Ù„Ù„Ø¹Ù…ÙŠÙ„</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># âŒ Return errors if form is invalid</span></span>
<span class="line">        <span class="token comment"># âŒ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø©ØŒ ÙŠØªÙ… Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</span></span>
<span class="line">        <span class="token comment"># ğŸ” ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… `form.errors.as_json()` Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¥Ù„Ù‰ ØµÙŠØºØ© JSON</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>as_json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ___________________________</span></span>
<span class="line"><span class="token comment"># ___________________________</span></span>
<span class="line"><span class="token comment"># ___________________________</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙˆØ·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ÙŠÙ†</span></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"GET"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸŒ Ø§Ù„Ø¯Ø§Ù„Ø© ØªÙ‚Ø¨Ù„ ÙÙ‚Ø· Ø·Ù„Ø¨Ø§Øª GET</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">friends</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> pk<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ğŸ‘¤ğŸ¯ pk Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù„Ù‰ ÙØ§ØªØ­ ØµÙØ­Ø© Ø§Ù„Ø¨Ø±ÙˆØ§ÙÙŠÙ„ Ø¹Ù† Ø·Ø±ÙŠÙ‚</span></span>
<span class="line">    <span class="token comment"># User Pk [Id ğŸ”‘ ] Ø§Ù„Ø§ÙŠØ¯Ù‰ Ø§Ù„Ø®Ø§Øµ Ø¨Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù„Ù‰ Ø§Ù†Ø§ Ø¨Ø¬ÙŠØ¨ Ø§Ù„Ø§ØµØ¯Ù‚Ø§Ø¡ Ø§Ù„Ø®Ø§ØµÙŠÙ† Ø¨ÙŠØ©</span></span>
<span class="line">    user <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>pk<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># print(f"ğŸ‘¥ [Friends] User By Id : {user}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________ğŸ‘¥_______________________________")</span></span>
<span class="line">    <span class="token comment"># âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ùˆ Ù†ÙØ³Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‡Ø¯Ù</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸŸ¢ Ø§ÙØªØ±Ø§Ø¶ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">    can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">True</span></span>
<span class="line">    <span class="token comment"># ğŸ”’ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„ ØµØ¯ÙŠÙ‚Ù‹Ø§.</span></span>
<span class="line">    <span class="token keyword">if</span> request<span class="token punctuation">.</span>user <span class="token keyword">in</span> user<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># ğŸ“¡ ØªØ³Ø¬ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">        <span class="token comment"># logger.info(f"âœ… [Friends] User Is Friend Yes: {request.user}")</span></span>
<span class="line">        <span class="token comment"># print("_________________________________ğŸ”’_______________________________")</span></span>
<span class="line">        <span class="token comment"># ğŸ›‘ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">        can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">False</span></span>
<span class="line"></span>
<span class="line">    is_current_user <span class="token operator">=</span> user <span class="token operator">==</span> request<span class="token punctuation">.</span>user</span>
<span class="line">    <span class="token comment"># print(f"request.user {request.user}")</span></span>
<span class="line">    <span class="token comment"># print(f"ğŸ’ª [Friends] User In Page Profile Is Owner  {is_current_user}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________ğŸ’ª_______________________________")</span></span>
<span class="line">    <span class="token comment"># ğŸ“ Ø¬Ù„Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ùˆ Ù†ÙØ³Ù‡ Ø§Ù„Ù‡Ø¯Ù</span></span>
<span class="line">    requests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">if</span> is_current_user<span class="token punctuation">:</span></span>
<span class="line">        requests <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">            created_for<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span></span>
<span class="line">            status<span class="token operator">=</span>FriendshipRequest<span class="token punctuation">.</span>WAITING<span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># logger.info(f"ğŸ’ª [Friends] If User Is Owner  {requests}")</span></span>
<span class="line">        <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line">        <span class="token comment"># ğŸ”„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¥Ù„Ù‰ JSON Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Serializer ğŸ”„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¥Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª JSON Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø±</span></span>
<span class="line">        requests <span class="token operator">=</span> FriendshipRequestSerializer<span class="token punctuation">(</span>requests<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data</span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ‘« Retrieve all friends of the user</span></span>
<span class="line">    <span class="token comment"># ğŸ‘« Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø£ØµØ¯Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    friendsAll <span class="token operator">=</span> user<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ğŸ“¡ ØªØ³Ø¬ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">    <span class="token comment"># logger.info(f"ğŸ‘« All Friends  {friendsAll}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line">    <span class="token comment"># Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø§Ù„Ø°ÙŠÙ† Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠÙ†Ù‡Ù… Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">    <span class="token comment"># Ø§Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù„Ù‰ Ø³Ø¬Ù„Ùˆ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙ‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹</span></span>
<span class="line">    notsend_users <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>exclude<span class="token punctuation">(</span>id__in<span class="token operator">=</span><span class="token punctuation">[</span>friend<span class="token punctuation">.</span><span class="token builtin">id</span> <span class="token keyword">for</span> friend <span class="token keyword">in</span> friendsAll<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># logger.info(f"ğŸ‘« Not Send Friends  {notsend_users}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line">    send <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>get_friends_by_status<span class="token punctuation">(</span>user<span class="token punctuation">,</span> FriendshipRequest<span class="token punctuation">.</span>SEND<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># logger.info(f"ğŸ‘« Send Friends  {send}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line">    waiting_friends <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>get_friends_by_status<span class="token punctuation">(</span></span>
<span class="line">        user<span class="token punctuation">,</span> FriendshipRequest<span class="token punctuation">.</span>WAITING</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># logger.info(f"ğŸ‘« Send Friends  {send}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line">    accepted_friends <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>get_friends_by_status<span class="token punctuation">(</span></span>
<span class="line">        user<span class="token punctuation">,</span> FriendshipRequest<span class="token punctuation">.</span>ACCEPTED</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># logger.info(f"ğŸ‘« [Friends] Accepted Friends  {accepted_friends}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line">    rejected_friends <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>get_friends_by_status<span class="token punctuation">(</span></span>
<span class="line">        user<span class="token punctuation">,</span> FriendshipRequest<span class="token punctuation">.</span>REJECTED</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># logger.info(f"ğŸ‘« [Friends] Rejected Friends  {rejected_friends}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line">    cancelled_requests <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>get_friends_by_status<span class="token punctuation">(</span></span>
<span class="line">        user<span class="token punctuation">,</span> FriendshipRequest<span class="token punctuation">.</span>CANCEL</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># logger.info(f"ğŸ‘« [Friends] Cancelled Requests Friends  {cancelled_requests}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line">    unfriend_requests <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>get_friends_by_status<span class="token punctuation">(</span></span>
<span class="line">        user<span class="token punctuation">,</span> FriendshipRequest<span class="token punctuation">.</span>UNFRIEND</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># logger.info(f"ğŸ‘« [Friends] Unfriend Friends  {unfriend_requests}")</span></span>
<span class="line">    <span class="token comment"># print("_________________________________âœ…_______________________________")</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“¤ Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ø³ØªØ¬Ø§Ø¨Ø© JSON ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ØŒ ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª</span></span>
<span class="line">    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">"user"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span>  <span class="token comment"># Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">            <span class="token comment"># "friends": UserSerializer(friends, many=True).data,  # Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span></span>
<span class="line">            <span class="token string">"friends"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string">"all"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>friendsAll<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">"notsend"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>notsend_users<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">"send"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>send<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">"waiting"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>waiting_friends<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">"accepted"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>accepted_friends<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">"rejected"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>rejected_friends<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">"cancel"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>cancelled_requests<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">"unfriend"</span><span class="token punctuation">:</span> UserSerializer<span class="token punctuation">(</span>unfriend_requests<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© (Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©)</span></span>
<span class="line">            <span class="token string">"requests"</span><span class="token punctuation">:</span> requests<span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment"># ØµÙ„Ø§Ø­ÙŠØ© Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">            <span class="token string">"can_send_friendship_request"</span><span class="token punctuation">:</span> can_send_friendship_request<span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>  <span class="token comment"># Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªÙ…Ø±ÙŠØ± ÙƒØ§Ø¦Ù†Ø§Øª Ù„ÙŠØ³Øª Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø§Ù…ÙˆØ³</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸŒ Ø§Ù„Ø¯Ø§Ù„Ø© ØªÙ‚Ø¨Ù„ ÙÙ‚Ø· Ø·Ù„Ø¨Ø§Øª POST</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">send_friendship_request</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> pk<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># ğŸ‘¤ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù</span></span>
<span class="line">        user <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>pk<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ğŸ™ ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ù…Ø±Ø³Ù„</span></span>
<span class="line">        send_request <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">            created_for<span class="token operator">=</span>user<span class="token punctuation">,</span> created_by<span class="token operator">=</span>request<span class="token punctuation">.</span>user</span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ğŸ™ send_request.id  </span><span class="token interpolation"><span class="token punctuation">{</span>send_request<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ğŸ¤ ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ù…Ø³ØªÙ„Ù…</span></span>
<span class="line">        received_request <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">            created_for<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span> created_by<span class="token operator">=</span>user</span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># âœ… Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø£ÙŠ Ø·Ù„Ø¨Ø§Øª ØµØ¯Ø§Ù‚Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> send_request <span class="token keyword">and</span> <span class="token keyword">not</span> received_request<span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment"># âœ‰ï¸ Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯</span></span>
<span class="line">            new_send_request <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span></span>
<span class="line">                created_for<span class="token operator">=</span>user<span class="token punctuation">,</span> created_by<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span> status<span class="token operator">=</span>FriendshipRequest<span class="token punctuation">.</span>SEND</span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment"># ğŸ“¡ ØªØ³Ø¬ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">            logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ğŸ‘‰ï¸ new_send_request </span><span class="token interpolation"><span class="token punctuation">{</span>new_send_request<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment"># Notsend Ø£Ø®Ø±Ø¬Ù‡ Ù…Ù†</span></span>
<span class="line">            FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">                created_for<span class="token operator">=</span>user<span class="token punctuation">,</span></span>
<span class="line">                created_by<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span></span>
<span class="line">                status<span class="token operator">=</span>FriendshipRequest<span class="token punctuation">.</span>NOTSEND<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment"># _______________________________________</span></span>
<span class="line">            <span class="token comment"># Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù…ØªÙ„Ù‚ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø±Ø³Ù„ Ù…Ø¹ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø­Ø§Ù„Ø©</span></span>
<span class="line">            <span class="token comment"># FriendshipRequest.objects.create(</span></span>
<span class="line">            <span class="token comment">#     created_for=request.user,</span></span>
<span class="line">            <span class="token comment">#     created_by=user,</span></span>
<span class="line">            <span class="token comment">#     status=FriendshipRequest.WAITING,</span></span>
<span class="line">            <span class="token comment"># )</span></span>
<span class="line">            <span class="token comment"># ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù… (Waiting)</span></span>
<span class="line">            FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>update_or_create<span class="token punctuation">(</span></span>
<span class="line">                created_for<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span></span>
<span class="line">                created_by<span class="token operator">=</span>user<span class="token punctuation">,</span></span>
<span class="line">                defaults<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"status"</span><span class="token punctuation">:</span> FriendshipRequest<span class="token punctuation">.</span>WAITING<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment"># Notsend Ø£Ø®Ø±Ø¬ Ù…Ù†</span></span>
<span class="line">            FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">                created_for<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span></span>
<span class="line">                created_by<span class="token operator">=</span>user<span class="token punctuation">,</span></span>
<span class="line">                status<span class="token operator">=</span>FriendshipRequest<span class="token punctuation">.</span>NOTSEND<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment"># Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ù„Ù„Ù…Ø³ØªÙ„Ù…</span></span>
<span class="line">            notification <span class="token operator">=</span> create_notification<span class="token punctuation">(</span></span>
<span class="line">                <span class="token comment"># ğŸ‘¥ Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± (Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯)</span></span>
<span class="line">                <span class="token string">"new_friendrequest"</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token comment"># ğŸ‘¤ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">                created_by<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span></span>
<span class="line">                <span class="token comment"># ğŸ‘¤ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ø§Ø³ØªÙ„Ù… Ø§Ù„Ø·Ù„Ø¨</span></span>
<span class="line">                created_for<span class="token operator">=</span>user<span class="token punctuation">,</span></span>
<span class="line">                <span class="token comment"># ğŸ“© Ù…Ø¹Ø±Ù Ø®Ø§Øµ Ù„Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯</span></span>
<span class="line">                friendrequest_id<span class="token operator">=</span>new_send_request<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment"># ğŸ›‘ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">            can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">False</span></span>
<span class="line">            <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span></span>
<span class="line">                <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Friendship request send successfully"</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token comment"># ØµÙ„Ø§Ø­ÙŠØ© Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">                    <span class="token string">"can_send_friendship_request"</span><span class="token punctuation">:</span> can_send_friendship_request<span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># âš ï¸ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø·Ù„Ø¨ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ Ø¨Ø§Ù„ÙØ¹Ù„</span></span>
<span class="line">        <span class="token keyword">if</span> send_request <span class="token keyword">and</span> send_request<span class="token punctuation">.</span>status <span class="token operator">==</span> FriendshipRequest<span class="token punctuation">.</span>SEND<span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment"># ğŸ›‘ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">            can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">False</span></span>
<span class="line">            datatroorfalse <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">                send_request <span class="token keyword">and</span> send_request<span class="token punctuation">.</span>status <span class="token operator">==</span> FriendshipRequest<span class="token punctuation">.</span>SEND</span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment"># ğŸ“¡ ØªØ³Ø¬ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span></span>
<span class="line">            logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ğŸš€ Request already send: </span><span class="token interpolation"><span class="token punctuation">{</span>datatroorfalse<span class="token punctuation">}</span></span><span class="token string"> ğŸ™"</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span></span>
<span class="line">                <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Request already send"</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token comment"># ØµÙ„Ø§Ø­ÙŠØ© Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">                    <span class="token string">"can_send_friendship_request"</span><span class="token punctuation">:</span> can_send_friendship_request<span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span></span>
<span class="line">        <span class="token keyword">if</span> send_request<span class="token punctuation">:</span></span>
<span class="line">            send_request<span class="token punctuation">.</span>status <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>SEND</span>
<span class="line">            send_request<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ğŸ™ Send Status </span><span class="token interpolation"><span class="token punctuation">{</span>send_request<span class="token punctuation">.</span>status<span class="token punctuation">}</span></span><span class="token string"> "</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span> received_request<span class="token punctuation">:</span></span>
<span class="line">            received_request<span class="token punctuation">.</span>status <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>WAITING</span>
<span class="line">            received_request<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ğŸ¤ Send Received  </span><span class="token interpolation"><span class="token punctuation">{</span>received_request<span class="token punctuation">.</span>status<span class="token punctuation">}</span></span><span class="token string"> "</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ğŸ’¬ Ø¥Ø±Ø¬Ø§Ø¹ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Friendship request updated successfully"</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token punctuation">(</span></span>
<span class="line">                    send_request<span class="token punctuation">.</span>status <span class="token keyword">if</span> send_request <span class="token keyword">else</span> received_request<span class="token punctuation">.</span>status</span>
<span class="line">                <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">except</span> User<span class="token punctuation">.</span>DoesNotExist<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"User not found"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span></span>
<span class="line">            <span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"An unexpected error occurred"</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">500</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸŒ Ø§Ù„Ø¯Ø§Ù„Ø© ØªØ³ØªÙ‚Ø¨Ù„ ÙÙ‚Ø· Ø·Ù„Ø¨Ø§Øª POST</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">handle_request</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> pk<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># ğŸ› ï¸ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø°Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>is_authenticated<span class="token punctuation">:</span></span>
<span class="line">            logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">"ğŸš« An unauthorized user has attempted to access."</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">raise</span> PermissionDenied<span class="token punctuation">(</span><span class="token string">"You must be logged in to perform this action."</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ğŸ§‘â€ğŸ¤â€ğŸ§‘ [ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù„Ù‰ Ø§Ù†Ø§ ÙÙŠÙ‡Ø§Ø¡ ID Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù [Ø§Ù„Ù„Ù‰ Ù‡Ùˆ</span></span>
<span class="line">        user <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>pk<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ğŸŸ¢ Ø§ÙØªØ±Ø§Ø¶ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">        can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">True</span></span>
<span class="line">        <span class="token comment"># ğŸ”’ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„ ØµØ¯ÙŠÙ‚Ù‹Ø§.</span></span>
<span class="line">        <span class="token keyword">if</span> request<span class="token punctuation">.</span>user <span class="token keyword">in</span> user<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment"># ğŸ›‘ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">            can_send_friendship_request <span class="token operator">=</span> <span class="token boolean">False</span></span>
<span class="line">            <span class="token comment"># âœ… ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ù‚Ø¨ÙˆÙ„ØŒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span></span>
<span class="line">            <span class="token keyword">if</span> status <span class="token operator">==</span> <span class="token string">"unfriend"</span><span class="token punctuation">:</span></span>
<span class="line">                logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span></span>
<span class="line">                    <span class="token string-interpolation"><span class="token string">f"âŒ remove </span><span class="token interpolation"><span class="token punctuation">{</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> And </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> As Unfriends."</span></span></span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">                remove_friends<span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span> user<span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span></span>
<span class="line">                    <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"Friendship request </span><span class="token interpolation"><span class="token punctuation">{</span>status<span class="token punctuation">}</span></span><span class="token string"> successfully"</span></span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token string">"status"</span><span class="token punctuation">:</span> status<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ğŸ” ğŸ™ [ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„Ø·Ù„Ø¨ ] Ø¬Ù„Ø¨ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø§Ù„Ù…Ø±Ø³Ù„</span></span>
<span class="line">        friendship_request_send <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">            created_by<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span> created_for<span class="token operator">=</span>user</span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ğŸš« ğŸ™ [ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„Ø·Ù„Ø¨ ] Ø§Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">        <span class="token keyword">if</span> friendship_request_send<span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment"># ğŸ’¬ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØªØ®Ø²ÙŠÙ†Ù‡Ø§</span></span>
<span class="line">            update_request_status<span class="token punctuation">(</span>friendship_request_send<span class="token punctuation">,</span> status<span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment"># ğŸš« ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù„ØºØ§Ø¡ØŒ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ Ø­Ø§Ù„Ø© NOTSEND</span></span>
<span class="line">            <span class="token keyword">if</span> status <span class="token operator">==</span> <span class="token string">"cancel"</span><span class="token punctuation">:</span></span>
<span class="line">                friendship_request_send<span class="token punctuation">.</span>created_for<span class="token punctuation">.</span>friendship_status <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">                    FriendshipRequest<span class="token punctuation">.</span>NOTSEND</span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">                friendship_request_send<span class="token punctuation">.</span>created_for<span class="token punctuation">.</span>friendship_status <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">                    FriendshipRequest<span class="token punctuation">.</span>CANCEL</span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">                friendship_request_send<span class="token punctuation">.</span>created_for<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span></span>
<span class="line">                    <span class="token string-interpolation"><span class="token string">f"ğŸš« The order has been cancelled and the user status has been restored. </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> To NOTSEND."</span></span></span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># _______________________________________</span></span>
<span class="line">        <span class="token comment"># ğŸ” ğŸ¤ [ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù… Ù„Ù„Ø·Ù„Ø¨ ] Ø¬Ù„Ø¨ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø§Ù„Ù…Ø±Ø³Ù„</span></span>
<span class="line">        friendship_request_waiting <span class="token operator">=</span> FriendshipRequest<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">            created_for<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span> created_by<span class="token operator">=</span>user</span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ğŸš« ğŸ™ [ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„Ø·Ù„Ø¨ ] Ù‚Ø¨ÙˆÙ„ Ø§Ùˆ Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">        <span class="token keyword">if</span> friendship_request_waiting<span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment"># ğŸ’¬ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØªØ®Ø²ÙŠÙ†Ù‡Ø§</span></span>
<span class="line">            update_request_status<span class="token punctuation">(</span>friendship_request_waiting<span class="token punctuation">,</span> status<span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment"># âœ… ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ù‚Ø¨ÙˆÙ„ØŒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span></span>
<span class="line">            <span class="token keyword">if</span> status <span class="token operator">==</span> <span class="token string">"accepted"</span><span class="token punctuation">:</span></span>
<span class="line">                add_friends<span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span> user<span class="token punctuation">)</span></span>
<span class="line">                logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"âœ… Added </span><span class="token interpolation"><span class="token punctuation">{</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> And </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> As friends."</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token comment"># Ø§Ø±Ø³Ø§Ù„ Ø§Ø´Ø¹Ø§Ø± Ø§Ù„Ù‰ Ø§Ù„Ù…Ø±Ø³Ø§Ù„ Ø¨Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">                notificationWaiting <span class="token operator">=</span> create_notification<span class="token punctuation">(</span></span>
<span class="line">                    <span class="token comment"># ğŸ‘¥ Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± (Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯)</span></span>
<span class="line">                    <span class="token string">"accepted_friendrequest"</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token comment"># ğŸ‘¤ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">                    created_by<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token comment"># ğŸ‘¤ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ø§Ø³ØªÙ„Ù… Ø§Ù„Ø·Ù„Ø¨</span></span>
<span class="line">                    created_for<span class="token operator">=</span>user<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token comment"># ğŸ“© Ù…Ø¹Ø±Ù Ø®Ø§Øµ Ù„Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯</span></span>
<span class="line">                    friendrequest_id<span class="token operator">=</span>friendship_request_send<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">                <span class="token comment"># ğŸ”” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙƒÙ€ "Ù…Ù‚Ø±ÙˆØ¡"</span></span>
<span class="line">                notificationSendAll <span class="token operator">=</span> Notification<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"notificationSendAll </span><span class="token interpolation"><span class="token punctuation">{</span>notificationSendAll<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></span>
<span class="line">                notificationSendId <span class="token operator">=</span> Notification<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span></span>
<span class="line">                    created_for<span class="token operator">=</span>request<span class="token punctuation">.</span>user</span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">                <span class="token comment"># notificationSendId = Notification.objects.filter(</span></span>
<span class="line">                <span class="token comment">#     created_for=request.user</span></span>
<span class="line">                <span class="token comment"># ).get(pk=pk)</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment"># notificationSend = Notification.objects.filter(</span></span>
<span class="line">                <span class="token comment">#     created_for=request.user, friendrequest_id=FriendshipRequest.id</span></span>
<span class="line">                <span class="token comment"># ).first()</span></span>
<span class="line">                <span class="token comment"># if notificationSend:</span></span>
<span class="line">                <span class="token comment">#     notificationSend.is_read = True</span></span>
<span class="line">                <span class="token comment">#     notificationSend.save()</span></span>
<span class="line">                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"notificationSendId </span><span class="token interpolation"><span class="token punctuation">{</span>notificationSendId<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token triple-quoted-string string">"""</span>
<span class="line">                "notification_id": (</span>
<span class="line">                        notificationSend.id if notificationSend else None</span>
<span class="line">                    ),</span>
<span class="line">                """</span></span>
<span class="line">            <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span></span>
<span class="line">                <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"Friendship request </span><span class="token interpolation"><span class="token punctuation">{</span>status<span class="token punctuation">}</span></span><span class="token string"> successfully"</span></span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token string">"status"</span><span class="token punctuation">:</span> status<span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ğŸ”´ âŒ [ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„Ø·Ù„Ø¨ ] Ø§Ø°Ø§ Ø­Ø¯Ø« Ø£Ø®Ø·Ø§Ø¡</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> friendship_request_waiting<span class="token punctuation">:</span></span>
<span class="line">            logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span></span>
<span class="line">                <span class="token string-interpolation"><span class="token string">f"âŒ Friendship request between </span><span class="token interpolation"><span class="token punctuation">{</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> And </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> unavailable."</span></span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"Friendship request not found"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># _______________________________________</span></span>
<span class="line">    <span class="token keyword">except</span> PermissionDenied <span class="token keyword">as</span> e<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">403</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">except</span> User<span class="token punctuation">.</span>DoesNotExist<span class="token punctuation">:</span></span>
<span class="line">        logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">"âŒ User not found."</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"User not found"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span></span>
<span class="line">        logger<span class="token punctuation">.</span>exception<span class="token punctuation">(</span><span class="token string">"âŒ An unexpected error occurred."</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"An unexpected error occurred"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸŸ¢ Ø§ÙØªØ±Ø§Ø¶ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">    <span class="token comment"># can_send_friendship_request = True</span></span>
<span class="line">    <span class="token comment"># # ğŸ”’ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„ ØµØ¯ÙŠÙ‚Ù‹Ø§.</span></span>
<span class="line">    <span class="token comment"># if request.user in user.friends.all():</span></span>
<span class="line">    <span class="token comment">#     can_send_friendship_request = False  # ğŸ›‘ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">    <span class="token comment">#         "can_send_friendship_request": can_send_friendship_request,  # ØµÙ„Ø§Ø­ÙŠØ© Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©.</span></span>
<span class="line">    <span class="token comment"># # _____________________________________________</span></span>
<span class="line">    <span class="token comment"># # _____________________________________________</span></span>
<span class="line">    <span class="token comment"># # _____________________________________________</span></span>
<span class="line">    <span class="token comment"># # _____________________________________________</span></span>
<span class="line">    <span class="token comment"># # _____________________________________________</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ› ï¸ ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">update_request_status</span><span class="token punctuation">(</span>friendship_request<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    friendship_request<span class="token punctuation">.</span>status <span class="token operator">=</span> status</span>
<span class="line">    friendship_request<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ğŸ”„ The order status has been updated to </span><span class="token interpolation"><span class="token punctuation">{</span>status<span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># âŒ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ø­Ø§Ù„Ø§Øª Ù…Ø¹ÙŠÙ†Ø©</span></span>
<span class="line">    <span class="token keyword">if</span> status <span class="token keyword">in</span> <span class="token punctuation">[</span></span>
<span class="line">        FriendshipRequest<span class="token punctuation">.</span>WAITING<span class="token punctuation">,</span></span>
<span class="line">        FriendshipRequest<span class="token punctuation">.</span>SEND<span class="token punctuation">,</span></span>
<span class="line">        FriendshipRequest<span class="token punctuation">.</span>CANCEL<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">:</span></span>
<span class="line">        friendship_request<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span></span>
<span class="line">            <span class="token string-interpolation"><span class="token string">f"âŒ The request was deleted between </span><span class="token interpolation"><span class="token punctuation">{</span>friendship_request<span class="token punctuation">.</span>created_by<span class="token punctuation">.</span>surname<span class="token punctuation">}</span></span><span class="token string"> And </span><span class="token interpolation"><span class="token punctuation">{</span>friendship_request<span class="token punctuation">.</span>created_for<span class="token punctuation">.</span>surname<span class="token punctuation">}</span></span><span class="token string">."</span></span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ‘« ÙˆØ¸ÙŠÙØ© Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">add_friends</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    user1<span class="token punctuation">.</span>friends<span class="token punctuation">.</span>add<span class="token punctuation">(</span>user2<span class="token punctuation">)</span></span>
<span class="line">    user1<span class="token punctuation">.</span>friends_count <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line">    user1<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    user2<span class="token punctuation">.</span>friends<span class="token punctuation">.</span>add<span class="token punctuation">(</span>user1<span class="token punctuation">)</span></span>
<span class="line">    user2<span class="token punctuation">.</span>friends_count <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line">    user2<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ‘« ÙˆØ¸ÙŠÙØ© Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">remove_friends</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    user1<span class="token punctuation">.</span>friends<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>user2<span class="token punctuation">)</span></span>
<span class="line">    user1<span class="token punctuation">.</span>friends_count <span class="token operator">-=</span> <span class="token number">1</span></span>
<span class="line">    user1<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    user2<span class="token punctuation">.</span>friends<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>user1<span class="token punctuation">)</span></span>
<span class="line">    user2<span class="token punctuation">.</span>friends_count <span class="token operator">-=</span> <span class="token number">1</span></span>
<span class="line">    user2<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù‚Ø¯ ÙŠØ¹Ø±ÙÙ‡Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ</span></span>
<span class="line"><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"GET"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ğŸŒ Ø§Ù„Ø¯Ø§Ù„Ø© ØªÙ‚Ø¨Ù„ ÙÙ‚Ø· Ø·Ù„Ø¨Ø§Øª GET</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">my_friendship_suggestions</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ¤ Suggest users the current user may know</span></span>
<span class="line">    <span class="token comment"># ğŸ¤ Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù‚Ø¯ ÙŠØ¹Ø±ÙÙ‡Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ</span></span>
<span class="line">    <span class="token comment"># ğŸ§‘â€ğŸ¤â€ğŸ§‘ Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„Ø§ÙŠØ²Ø± ÙŠÙ‚ÙˆÙ… Ø¨ØªØ­ÙˆÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù‚Ø¯ ÙŠØ¹Ø±ÙÙ‡Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ ØµÙŠØºØ© JSON</span></span>
<span class="line">    serializer <span class="token operator">=</span> UserSerializer<span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>people_you_may_know<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># print("ğŸ¤ Suggest users", serializer)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ğŸ“¤ Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ø³ØªØ¬Ø§Ø¨Ø© JSON</span></span>
<span class="line">    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”—-urls-Ø§Ù„Ø±ÙˆØ§Ø¨Ø·" tabindex="-1"><a class="header-anchor" href="#ğŸ”—-urls-Ø§Ù„Ø±ÙˆØ§Ø¨Ø·"><span>ğŸ”— Urls (Ø§Ù„Ø±ÙˆØ§Ø¨Ø·)</span></a></h2>
<div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre v-pre><code><span class="line"><span class="token comment"># ğŸ“„ [ users_accounts/urls.py ] Ù…Ù„Ù</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŒ ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span></span>
<span class="line"><span class="token comment"># ğŸŒ URL Configuration for User and Friend Management API</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ“¦ Ø§Ø³ØªÙŠØ±Ø§Ø¯ path Ù…Ù† Ù…ÙƒØªØ¨Ø© Django Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path</span>
<span class="line"></span>
<span class="line"><span class="token keyword">from</span> rest_framework_simplejwt<span class="token punctuation">.</span>views <span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    TokenObtainPairView<span class="token punctuation">,</span></span>
<span class="line">    TokenRefreshView<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span>  <span class="token comment"># ğŸ›¡ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² JWT ÙˆØªØ­Ø¯ÙŠØ«Ù‡</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> api  <span class="token comment"># ğŸ”§ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ù…Ù† Ù…Ù„Ù api</span></span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token comment"># ğŸ‘¤ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Retrieve current user's information</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"me/"</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>me<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"me"</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘¥ Ø±Ø§Ø¨Ø· Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ Ù‚Ø§Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span></span>
<span class="line">    <span class="token comment"># ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¬Ø¯Ø¯</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Signup for new users</span></span>
<span class="line">    <span class="token comment"># ğŸ“ Ø±Ø§Ø¨Ø· Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¬Ø¯Ø¯</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">"signup/"</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>signup<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"signup"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment"># ğŸ”‘ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² JWT Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Obtain JWT token for login</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"login/"</span><span class="token punctuation">,</span> TokenObtainPairView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"token_obtain"</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ”‘ Ø±Ø§Ø¨Ø· Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² JWT Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span></span>
<span class="line">    <span class="token comment"># â™»ï¸ ØªØ­Ø¯ÙŠØ« Ø±Ù…Ø² JWT</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Refresh JWT token</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"refresh/"</span><span class="token punctuation">,</span> TokenRefreshView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"token_refresh"</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ”„ Ø±Ø§Ø¨Ø· Ù„ØªØ­Ø¯ÙŠØ« Ø±Ù…Ø² JWT</span></span>
<span class="line">    <span class="token comment"># ___________________________</span></span>
<span class="line">    <span class="token comment"># ___________________________</span></span>
<span class="line">    <span class="token comment"># ___________________________</span></span>
<span class="line">    <span class="token comment"># ** Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… **</span></span>
<span class="line">    <span class="token comment"># ğŸ“ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø¹Ø±ÙÙ‡</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Retrieve user profile by ID</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"profile/&lt;uuid:id>/"</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>profile<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"profile"</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘¤ Ø±Ø§Ø¨Ø· Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¹Ø±Ù (ID)</span></span>
<span class="line">    <span class="token comment"># âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Edit user profile</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"editprofile/"</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>editprofile<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"editprofile"</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ“ Ø±Ø§Ø¨Ø· Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    <span class="token comment"># ğŸ”’ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Change user password</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"editpassword/"</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>editpassword<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"editpassword"</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ”‘ Ø±Ø§Ø¨Ø· Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    <span class="token comment"># ___________________________</span></span>
<span class="line">    <span class="token comment"># ___________________________</span></span>
<span class="line">    <span class="token comment"># ___________________________</span></span>
<span class="line">    <span class="token comment"># ** Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ **</span></span>
<span class="line">    <span class="token comment"># ğŸ‘« Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Retrieve friends of a user</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"friends/&lt;uuid:pk>/"</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>friends<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"friends"</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘¥ Ø±Ø§Ø¨Ø· Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø±Ù (ID)</span></span>
<span class="line">    <span class="token comment"># ğŸ¤ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ Ø§Ù„Ù…Ù‚ØªØ±Ø­ÙŠÙ† Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Retrieve suggested friends for the user</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"friends/suggested/"</span><span class="token punctuation">,</span></span>
<span class="line">        api<span class="token punctuation">.</span>my_friendship_suggestions<span class="token punctuation">,</span></span>
<span class="line">        name<span class="token operator">=</span><span class="token string">"my_friendship_suggestions"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘« Ø±Ø§Ø¨Ø· Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ Ø§Ù„Ù…Ù‚ØªØ±Ø­ÙŠÙ† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØµØ¯Ø§Ù‚Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</span></span>
<span class="line">    <span class="token comment"># âœ‰ï¸ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Send a friendship request</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"friends/&lt;uuid:pk>/request/"</span><span class="token punctuation">,</span></span>
<span class="line">        api<span class="token punctuation">.</span>send_friendship_request<span class="token punctuation">,</span></span>
<span class="line">        name<span class="token operator">=</span><span class="token string">"send_friendship_request"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ’Œ Ø±Ø§Ø¨Ø· Ù„Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ø¥Ù„Ù‰ Ù…Ø³ØªØ®Ø¯Ù… Ø¢Ø®Ø±</span></span>
<span class="line">    <span class="token comment"># ğŸ› ï¸ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© (Ù‚Ø¨ÙˆÙ„/Ø±ÙØ¶)</span></span>
<span class="line">    <span class="token comment"># ğŸŒ Handle a friendship request (accept/reject)</span></span>
<span class="line">    path<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">"friends/&lt;uuid:pk>/&lt;str:status>/"</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>handle_request<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"handle_request"</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># ğŸ‘¥ Ø±Ø§Ø¨Ø· Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© (Ù‚Ø¨ÙˆÙ„ Ø£Ùˆ Ø±ÙØ¶)</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


